@echo off
chcp 65001 > nul
setlocal enabledelayedexpansion

:menu
cls
echo ═══════════════════════════════════════════════════════════════════════════════
echo                     🗄️  УПРАВЛЕНИЕ КЭШЕМ ЗАПРОСОВ
echo ═══════════════════════════════════════════════════════════════════════════════
echo.
echo  1. 📋 Список закэшированных групп
echo  2. 📊 Статистика по кэшу
echo  3. ℹ️  Информация о группе
echo  4. 🗑️  Очистить кэш группы
echo  5. 🧹 Очистить весь кэш
echo  0. ❌ Выход
echo.
echo ═══════════════════════════════════════════════════════════════════════════════

set /p choice="Выберите действие (0-5): "

if "%choice%"=="0" goto end
if "%choice%"=="1" goto list
if "%choice%"=="2" goto stats
if "%choice%"=="3" goto info
if "%choice%"=="4" goto clear
if "%choice%"=="5" goto clear_all

echo ❌ Неверный выбор
timeout /t 2 > nul
goto menu

:list
cls
echo ═══════════════════════════════════════════════════════════════════════════════
echo                     📋 СПИСОК ЗАКЭШИРОВАННЫХ ГРУПП
echo ═══════════════════════════════════════════════════════════════════════════════
echo.
python manage_query_cache.py --list
echo.
echo ═══════════════════════════════════════════════════════════════════════════════
pause
goto menu

:stats
cls
echo ═══════════════════════════════════════════════════════════════════════════════
echo                     📊 СТАТИСТИКА ПО КЭШУ
echo ═══════════════════════════════════════════════════════════════════════════════
echo.
python manage_query_cache.py --stats
echo.
echo ═══════════════════════════════════════════════════════════════════════════════
pause
goto menu

:info
cls
echo ═══════════════════════════════════════════════════════════════════════════════
echo                     ℹ️  ИНФОРМАЦИЯ О ГРУППЕ
echo ═══════════════════════════════════════════════════════════════════════════════
echo.
set /p group_name="Введите название группы: "
echo.
python manage_query_cache.py --info "%group_name%"
echo.
echo ═══════════════════════════════════════════════════════════════════════════════
pause
goto menu

:clear
cls
echo ═══════════════════════════════════════════════════════════════════════════════
echo                     🗑️  ОЧИСТКА КЭША ГРУППЫ
echo ═══════════════════════════════════════════════════════════════════════════════
echo.
set /p group_name="Введите название группы: "
echo.
python manage_query_cache.py --clear "%group_name%"
echo.
echo ═══════════════════════════════════════════════════════════════════════════════
pause
goto menu

:clear_all
cls
echo ═══════════════════════════════════════════════════════════════════════════════
echo                     🧹 ПОЛНАЯ ОЧИСТКА КЭША
echo ═══════════════════════════════════════════════════════════════════════════════
echo.
python manage_query_cache.py --clear-all
echo.
echo ═══════════════════════════════════════════════════════════════════════════════
pause
goto menu

:end
exit /b 0


