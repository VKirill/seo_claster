═══════════════════════════════════════════════════════════════════════════════
  НАСТРОЙКА АЛИАСОВ ГОРОДОВ ДЛЯ ЭКСПОРТА
═══════════════════════════════════════════════════════════════════════════════

📄 Файл: keyword_settings/city_aliases.xml

Этот файл содержит маппинг сокращений и падежных форм городов к их
полным официальным названиям с заглавной буквы.

───────────────────────────────────────────────────────────────────────────────
🎯 ДЛЯ ЧЕГО ЭТО НУЖНО?
───────────────────────────────────────────────────────────────────────────────

В процессе кластеризации города обнаруживаются в разных формах:
  - Сокращения: "спб", "мск"
  - Падежные формы: "москве", "питере", "екатеринбурге"
  - Алиасы: "питер", "петербург"
  - Lowercase: "москва", "казань"

Этот XML файл преобразует все эти варианты в красивый формат для экспорта:
  ✅ спб → Санкт-Петербург
  ✅ мск → Москва
  ✅ питере → Санкт-Петербург
  ✅ москва → Москва
  ✅ екатеринбурге → Екатеринбург

───────────────────────────────────────────────────────────────────────────────
📝 КАК ДОБАВИТЬ НОВЫЙ ГОРОД ИЛИ СОКРАЩЕНИЕ?
───────────────────────────────────────────────────────────────────────────────

1. Откройте файл: keyword_settings/city_aliases.xml

2. Добавьте строку в формате:
   <alias short="короткое_название" full="Полное Название" />

3. Примеры:

   <!-- Краснодар -->
   <alias short="краснодар" full="Краснодар" />
   <alias short="краснодара" full="Краснодар" />
   <alias short="краснодаре" full="Краснодар" />
   <alias short="краснодару" full="Краснодар" />

   <!-- Новосибирск с алиасом -->
   <alias short="нск" full="Новосибирск" />
   <alias short="новосибирск" full="Новосибирск" />

4. Сохраните файл

5. Запустите кластеризацию заново

───────────────────────────────────────────────────────────────────────────────
⚙️ КАК ЭТО РАБОТАЕТ?
───────────────────────────────────────────────────────────────────────────────

1. КЛАСТЕРИЗАЦИЯ:
   - Города матчатся из Russian.txt и через Natasha NER
   - Сохраняются как есть (lowercase, сокращения)

2. ЭКСПОРТ (Excel, JSON):
   - Перед экспортом применяется normalize_city_name()
   - Города преобразуются согласно city_aliases.xml
   - Результат: красивые полные названия с заглавной буквы

───────────────────────────────────────────────────────────────────────────────
✅ ПРЕИМУЩЕСТВА ЭТОГО ПОДХОДА
───────────────────────────────────────────────────────────────────────────────

✓ Нет хардкода в коде - всё в XML файле
✓ Легко добавлять новые города и сокращения
✓ Можно редактировать без изменения кода
✓ Автоматическая капитализация для неизвестных городов
✓ Поддержка любых падежных форм и алиасов

───────────────────────────────────────────────────────────────────────────────
📊 ТЕКУЩИЙ СТАТУС
───────────────────────────────────────────────────────────────────────────────

В файле сейчас: 70+ алиасов для 15 крупнейших городов России

Включая:
  • Москва (мск, москве, москвы и т.д.)
  • Санкт-Петербург (спб, питер, петербург, питере и т.д.)
  • Екатеринбург
  • Новосибирск
  • Казань
  • Нижний Новгород
  • Челябинск
  • Самара
  • Омск
  • Ростов-на-Дону
  • Уфа
  • Красноярск
  • Воронеж
  • Пермь
  • Волгоград

───────────────────────────────────────────────────────────────────────────────
🔧 ТЕХНИЧЕСКАЯ ИНФОРМАЦИЯ
───────────────────────────────────────────────────────────────────────────────

Файлы:
  • keyword_settings/city_aliases.xml - XML с алиасами
  • seo_analyzer/core/city_alias_loader.py - загрузчик XML
  • pipeline/stages/classifier.py - применение нормализации перед экспортом

Функция нормализации: normalize_city_name(city_name: str) -> str

═══════════════════════════════════════════════════════════════════════════════

