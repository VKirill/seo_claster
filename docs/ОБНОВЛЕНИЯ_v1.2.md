# üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è v1.2 - SERP –∞–Ω–∞–ª–∏–∑ —Ç–µ–ø–µ—Ä—å –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù

## –î–∞—Ç–∞: 2025-12-07

---

## üéØ –ì–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

### ‚ùå –†–∞–Ω—å—à–µ (v1.0-1.1):

```bash
# –ú–æ–∂–Ω–æ –±—ã–ª–æ –±–µ–∑ SERP
python main.py data.csv

# –ò–ª–∏ —Å SERP (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
python main.py data.csv --enable-serp --xmlstock-api-key user:key
```

### ‚úÖ –¢–µ–ø–µ—Ä—å (v1.2):

```bash
# SERP –∞–Ω–∞–ª–∏–∑ –í–°–ï–ì–î–ê –≤–∫–ª—é—á–µ–Ω (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
python main.py data.csv

# API –∫–ª—é—á –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ config_local.py –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

---

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ?

### –ü—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞—Ä–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

1. ‚ùå **–ù–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ SERP**
   - –ù–µ—Ç KEI –º–µ—Ç—Ä–∏–∫
   - –ù–µ—Ç LSI —Ñ—Ä–∞–∑
   - –ù–µ—Ç priority_score
   - –ù–∞–∑–≤–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–µ

2. ‚ùå **–ü—É—Ç–∞–Ω–∏—Ü–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
   - –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω SERP, –∞ –∫–æ–≥–¥–∞ –Ω–µ—Ç?
   - –ó–∞—á–µ–º --enable-serp –∏ --enable-kei?
   - –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –±–µ–∑ SERP?

3. ‚ùå **–î–≤–∞ —Ä–∞–∑–Ω—ã—Ö workflow**
   - "–ë—ã—Å—Ç—Ä—ã–π –±–µ–∑ SERP" vs "–ü–æ–ª–Ω—ã–π —Å SERP"
   - –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –ù–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–æ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

1. ‚úÖ **–í—Å–µ–≥–¥–∞ –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - 18 KEI —Ñ–æ—Ä–º—É–ª
   - LSI —Ñ—Ä–∞–∑—ã –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   - Excel —Å 5 –ª–∏—Å—Ç–∞–º–∏
   - priority_score –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏

2. ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞**
   - –û–¥–∏–Ω —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞
   - –í—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
   - –ú–µ–Ω—å—à–µ CLI –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

3. ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å–∫–æ—Ä–æ—Å—Ç–∏**
   - –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫: ~5-10 –º–∏–Ω—É—Ç (API)
   - –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ: ~10-20 —Å–µ–∫—É–Ω–¥ (–∏–∑ –ë–î)
   - Cache hit rate: 80-100%

---

## üîß –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

### main.py

#### –î–æ:
```python
# –≠—Ç–∞–ø 4.5: SERP –∞–Ω–∞–ª–∏–∑ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
if self.args.enable_serp and self.args.xmlstock_api_key:
    await self.analyze_serp()

# –≠—Ç–∞–ø 4.6: –†–∞—Å—á–µ—Ç KEI –º–µ—Ç—Ä–∏–∫
if self.args.enable_kei or (self.args.enable_serp and self.args.xmlstock_api_key):
    await self.calculate_metrics()
```

#### –ü–æ—Å–ª–µ:
```python
# –≠—Ç–∞–ø 4.5: SERP –∞–Ω–∞–ª–∏–∑ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô)
await self.analyze_serp()

# –≠—Ç–∞–ø 4.6: –†–∞—Å—á–µ—Ç KEI –º–µ—Ç—Ä–∏–∫ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô)
await self.calculate_metrics()

# –≠—Ç–∞–ø 4.7: –ê–≥—Ä–µ–≥–∞—Ü–∏—è LSI –ø–æ –∫–ª–∞—Å—Ç–µ—Ä–∞–º (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô)
if 'lsi_phrases' in self.df.columns:
    await self.aggregate_cluster_lsi()
```

### CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã

#### –£–¥–∞–ª–µ–Ω—ã:
- ‚ùå `--enable-serp` (—Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω)
- ‚ùå `--enable-kei` (—Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω)

#### –û—Å—Ç–∞–ª–∏—Å—å:
- ‚úÖ `--xmlstock-api-key` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ –≤ config_local.py)
- ‚úÖ `--max-serp-queries` (default: 500)
- ‚úÖ `--skip-excel` (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω Excel)
- ‚úÖ `--excel-with-charts` (–¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤)
- ‚úÖ `--soft-clustering` (–º—è–≥–∫–∞—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è)

---

## üìã –ù–æ–≤—ã–π workflow

### 1. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑):

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞
copy config_local.py.example config_local.py
# –û—Ç–∫—Ä–æ–π—Ç–µ config_local.py –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –∫–ª—é—á
```

### 2. –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞:

```bash
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
python main.py semantika/—Å–∫—É–¥.csv

# –ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
python main.py data.csv --max-serp-queries 500 --soft-clustering
```

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (–í–°–ï–ì–î–ê –ø–æ–ª–Ω—ã–µ):

```
output/
‚îú‚îÄ‚îÄ serp_data.db                 ‚úÖ SQLite —Å SERP –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ seo_analysis.xlsx            ‚úÖ Excel —Å 5 –ª–∏—Å—Ç–∞–º–∏
‚îú‚îÄ‚îÄ cluster_lsi_phrases.csv      ‚úÖ LSI —Ñ—Ä–∞–∑—ã
‚îú‚îÄ‚îÄ seo_analysis_full.csv        ‚úÖ CSV —Å KEI –º–µ—Ç—Ä–∏–∫–∞–º–∏
‚îî‚îÄ‚îÄ ...
```

---

## üéì –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫:

```bash
python main.py semantika/—Å–∫—É–¥.csv
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è API –∫–ª—é—á –∏–∑ config_local.py
2. ‚úÖ –ß–∏—Å—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (–¥—É–±–ª–∏, ratio > 51)
3. ‚úÖ –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
4. ‚úÖ **SERP –∞–Ω–∞–ª–∏–∑ TOP-500** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
5. ‚úÖ **–†–∞—Å—á–µ—Ç KEI –º–µ—Ç—Ä–∏–∫** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
6. ‚úÖ **–ê–≥—Ä–µ–≥–∞—Ü–∏—è LSI** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
7. ‚úÖ Excel —ç–∫—Å–ø–æ—Ä—Ç

### –≠–∫–æ–Ω–æ–º–∏—è API –ª–∏–º–∏—Ç–æ–≤:

```bash
# –ê–Ω–∞–ª–∏–∑ —Ç–æ–ª—å–∫–æ —Ç–æ–ø-100 –∑–∞–ø—Ä–æ—Å–æ–≤
python main.py data.csv --max-serp-queries 100

# –ê–Ω–∞–ª–∏–∑ —Ç–æ–ø-1000
python main.py data.csv --max-serp-queries 1000
```

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ (–∫—ç—à):

```bash
# –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫: 500 API –∑–∞–ø—Ä–æ—Å–æ–≤
python main.py data.csv --max-serp-queries 500

# –í—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫ (–≤ —Ç–µ—á–µ–Ω–∏–µ 30 –¥–Ω–µ–π): 0 API –∑–∞–ø—Ä–æ—Å–æ–≤ (–∏–∑ –ë–î)
python main.py data.csv --max-serp-queries 500
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å

### API –∫–ª—é—á –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù

–ë–µ–∑ API –∫–ª—é—á–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è:

```bash
python main.py data.csv
# –í—ã–≤–æ–¥:
# ‚ö†Ô∏è  API –∫–ª—é—á xmlstock –Ω–µ –Ω–∞–π–¥–µ–Ω!
# –°–ø–æ—Å–æ–± 1: --xmlstock-api-key user:key
# –°–ø–æ—Å–æ–± 2: —Å–æ–∑–¥–∞–π—Ç–µ config_local.py (—Å–º. config_local.py.example)
# –°–ø–æ—Å–æ–± 3: export XMLSTOCK_API_KEY=user:key
```

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ `config_local.py` –æ–¥–∏–Ω —Ä–∞–∑

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫–æ–Ω–æ–º–∏—Ç –¥–µ–Ω—å–≥–∏

```
–°—Ü–µ–Ω–∞—Ä–∏–π: 500 –∑–∞–ø—Ä–æ—Å–æ–≤, —Ç–∞—Ä–∏—Ñ 2 —Ä—É–±/1000 –∑–∞–ø—Ä–æ—Å–æ–≤

–î–µ–Ω—å 1: 500 API –∑–∞–ø—Ä–æ—Å–æ–≤ = 1 —Ä—É–±–ª—å
–î–µ–Ω—å 2: 0 API –∑–∞–ø—Ä–æ—Å–æ–≤ = 0 —Ä—É–±–ª–µ–π (–∏–∑ –∫—ç—à–∞)
–î–µ–Ω—å 3: 0 API –∑–∞–ø—Ä–æ—Å–æ–≤ = 0 —Ä—É–±–ª–µ–π (–∏–∑ –∫—ç—à–∞)
...
–î–µ–Ω—å 30: 0 API –∑–∞–ø—Ä–æ—Å–æ–≤ = 0 —Ä—É–±–ª–µ–π (–∏–∑ –∫—ç—à–∞)

–≠–∫–æ–Ω–æ–º–∏—è: 29 —Ä—É–±–ª–µ–π –≤ –º–µ—Å—è—Ü (–ø—Ä–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞—Ö)
```

### TTL –∫—ç—à–∞ = 30 –¥–Ω–µ–π

–î–∞–Ω–Ω—ã–µ –≤ –ë–î –∞–∫—Ç—É–∞–ª—å–Ω—ã 30 –¥–Ω–µ–π, –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–î–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è - —É–¥–∞–ª–∏—Ç–µ `output/serp_data.db`

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å v1.1

### –°—Ç–∞—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã ‚Üí –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# ‚ùå –°–¢–ê–†–û–ï (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
python main.py data.csv --enable-serp --xmlstock-api-key user:key

# ‚úÖ –ù–û–í–û–ï
python main.py data.csv  # API –∫–ª—é—á –∏–∑ config_local.py
```

```bash
# ‚ùå –°–¢–ê–†–û–ï
python main.py data.csv  # –ë–µ–∑ SERP

# ‚úÖ –ù–û–í–û–ï (–≤—Å–µ–≥–¥–∞ —Å SERP)
python main.py data.csv  # SERP –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –°–∫—Ä–∏–ø—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç—ã —Å `--enable-serp`, —É–¥–∞–ª–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–ª–∞–≥:

```bash
# –î–æ
for file in *.csv; do
    python main.py "$file" --enable-serp --xmlstock-api-key $KEY
done

# –ü–æ—Å–ª–µ
for file in *.csv; do
    python main.py "$file"  # API –∫–ª—é—á –∏–∑ config_local.py
done
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **–£–¥–∞–ª–µ–Ω–æ CLI –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:** 2 (`--enable-serp`, `--enable-kei`)
- **–£–ø—Ä–æ—â–µ–Ω–æ —É—Å–ª–æ–≤–∏–π –≤ –∫–æ–¥–µ:** 5 –ø—Ä–æ–≤–µ—Ä–æ–∫ —É–±—Ä–∞–Ω–æ
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:** 3 —Ñ–∞–π–ª–∞
- **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã

---

## üéâ –ò—Ç–æ–≥–æ

### –î–æ v1.2:
```bash
# –ú–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–æ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
python main.py data.csv                    # –ë–µ–∑ SERP
python main.py data.csv --enable-serp      # –° SERP
python main.py data.csv --enable-kei       # –° KEI
```

### –ü–æ—Å–ª–µ v1.2:
```bash
# –û–¥–∏–Ω —Å–ø–æ—Å–æ–±, –≤—Å–µ–≥–¥–∞ –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
python main.py data.csv
```

**–ü—Ä–æ—â–µ. –ü–æ–Ω—è—Ç–Ω–µ–µ. –í—Å–µ–≥–¥–∞ –ø–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.** üöÄ

---

**–í–µ—Ä—Å–∏—è:** 1.2  
**–ü—Ä–µ–¥—ã–¥—É—â–∞—è:** 1.1  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ SERP –∞–Ω–∞–ª–∏–∑ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω  
**–î–∞—Ç–∞:** 2025-12-07


