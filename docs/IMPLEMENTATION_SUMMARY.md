# üìã –ò—Ç–æ–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ SERP + LSI + KEI + Excel

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. SQLite –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/core/serp_database.py`

- [x] –¢–∞–±–ª–∏—Ü—ã: serp_results, serp_documents, lsi_phrases
- [x] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL 30 –¥–Ω–µ–π
- [x] –ú–µ—Ç–æ–¥—ã: get_serp_data(), save_serp_data(), get_statistics()
- [x] –û—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö: clear_old_data()
- [x] –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON –¥–ª—è –±—ç–∫–∞–ø–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ xmlstock API –ø—Ä–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞—Ö
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –≤–º–µ—Å—Ç–æ —Å–µ–∫—É–Ω–¥)
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å timestamp

### 2. –§–∞–π–ª–æ–≤—ã–π –∫—ç—à ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/core/serp_cache.py`

- [x] JSON –∫—ç—à –≤ output/serp_cache/
- [x] TTL 30 –¥–Ω–µ–π
- [x] –ú–µ—Ç–æ–¥—ã: get(), set(), clear_expired()
- [x] –†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

### 3. LSI –≠–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/core/lsi_extractor.py`

- [x] N-–≥—Ä–∞–º–º—ã (2-4 —Å–ª–æ–≤–∞) –∏–∑ title, snippet, passages
- [x] –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ pymorphy3
- [x] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–æ–ø-—Å–ª–æ–≤
- [x] –¢–æ–ø-10 —Ñ—Ä–∞–∑ –Ω–∞ –∑–∞–ø—Ä–æ—Å –ø–æ —á–∞—Å—Ç–æ—Ç–µ
- [x] –ú–µ—Ç–æ–¥ aggregate_cluster_lsi() –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤

### 4. SERP Data Enricher ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/core/serp_data_enricher.py`

- [x] –ü–∞—Ä—Å–∏–Ω–≥ XML –æ—Ç xmlstock
- [x] –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫:
  - found_docs (<found>)
  - main_pages_count (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ <group>)
  - titles_with_keyword (–ø–æ–∏—Å–∫ –ö–° –≤ <title>)
  - commercial_domains (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º)
  - info_domains
- [x] –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏
- [x] –ú–µ—Ç–æ–¥ calculate_serp_difficulty()

### 5. SERP Analyzer ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/analysis/serp_analyzer.py`

- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å xmlstock API
- [x] Async –∑–∞–ø—Ä–æ—Å—ã —Å retry –ª–æ–≥–∏–∫–æ–π
- [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ë–î –∏ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –∫—ç—à–∞
- [x] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (max_concurrent=5)
- [x] Progress callback –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- [x] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: cache hit rate, API requests, errors

### 6. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ–æ-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/classification/intent_classifier.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- [x] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Russian.txt –≥–æ—Ä–æ–¥–∞ —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ —Å–ª–æ–≤ `\b`
- [x] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Moscow.txt –≤–∞—Ä–∏–∞–Ω—Ç—ã
- [x] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Kazakhstan/Belarus/Ukraine
- [x] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: Country –æ–±—â–∏–µ —Ç–µ—Ä–º–∏–Ω—ã
- [x] –ì–µ–æ-–∑–∞–ø—Ä–æ—Å—ã –í–°–ï–ì–î–ê commercial
- [x] –ù–æ–≤–æ–µ –ø–æ–ª–µ: detected_location

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```python
"—Å–∏—Å—Ç–µ–º—ã —Å–∫—É–¥ —Ä–æ—Å—Ç–æ–≤ –Ω–∞ –¥–æ–Ω—É" ‚Üí commercial, geo_city="–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É"
"—Å–∫—É–¥ –º–æ—Å–∫–≤–∞" ‚Üí commercial, geo_city="–ú–æ—Å–∫–≤–∞"
```

### 7. SEO Metrics Calculator ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/metrics/seo_metrics_calculator.py`

**18 KEI —Ñ–æ—Ä–º—É–ª:**

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ (3):**
- [x] kei_standard: (Freq/2)¬≤ / Competition
- [x] kei_devaka: (ExactFreq*3 + BaseFreq) / BaseFreq
- [x] kei_base_exact_ratio: BaseFreq / ExactFreq

**Soltyk (9):**
- [x] kei_competition (–º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
- [x] kei_effectiveness (–º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
- [x] kei_coefficient
- [x] kei_popularity
- [x] kei_potential_traffic
- [x] kei_cost_per_visit
- [x] kei_potential_revenue
- [x] kei_synergy
- [x] kei_yandex_relevance

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ (6):**
- [x] ctr_potential
- [x] commercial_value
- [x] traffic_potential
- [x] priority_score (–∏—Ç–æ–≥–æ–≤—ã–π)
- [x] kei_standard_normalized
- [x] kei_effectiveness_normalized

### 8. Cluster LSI Aggregator ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/analysis/cluster_lsi_aggregator.py`

- [x] –ê–≥—Ä–µ–≥–∞—Ü–∏—è LSI —Ñ—Ä–∞–∑ –ø–æ –∫–ª–∞—Å—Ç–µ—Ä–∞–º
- [x] –¢–æ–ø-10 —Ñ—Ä–∞–∑ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä
- [x] –ü–æ–¥—Å—á–µ—Ç relevance_score
- [x] –ú–µ—Ç–æ–¥ add_cluster_lsi_to_dataframe()
- [x] –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV: cluster_lsi_phrases.csv
- [x] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ LSI

### 9. Soft Topic Clustering ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/clustering/topic_modeler.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- [x] –ú–µ—Ç–æ–¥ assign_topics_soft() - –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ–º –Ω–∞ –∑–∞–ø—Ä–æ—Å
- [x] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: top_k=3, min_probability=0.15
- [x] –û–±–Ω–æ–≤–ª–µ–Ω add_topics_to_dataframe() —Å use_soft_clustering
- [x] –ù–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏: all_topics, all_topics_str

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```python
query: "—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç—É—Ä–Ω–∏–∫–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è"
all_topics: [(0, 0.45), (3, 0.30), (7, 0.15)]
all_topics_str: "T0(0.45), T3(0.30), T7(0.15)"
```

### 10. Excel Exporter ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/export/excel_exporter.py`

**5 –ª–∏—Å—Ç–æ–≤:**
- [x] All Queries - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –∫–ª–∞—Å—Ç–µ—Ä–∞–º
- [x] Top Priority - —Ç–æ–ø-100 –ø–æ priority_score
- [x] Clusters Summary - —Å–≤–æ–¥–∫–∞ –ø–æ –∫–ª–∞—Å—Ç–µ—Ä–∞–º
- [x] Intent Summary - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∏–Ω—Ç–µ–Ω—Ç–∞–º
- [x] LSI Phrases - LSI —Ñ—Ä–∞–∑—ã –∫–ª–∞—Å—Ç–µ—Ä–æ–≤

**–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- [x] –£—Å–ª–æ–≤–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (3-color scale)
- [x] –ê–≤—Ç–æ—Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞ –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–∫–∞—Ö
- [x] –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω–∞—è –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞
- [x] –ê–≤—Ç–æ—à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫
- [x] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–ª–∞—Å—Ç–µ—Ä–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 11. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/core/config.py`

**–î–æ–±–∞–≤–ª–µ–Ω—ã:**
- [x] SERP_CONFIG - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API, –∫—ç—à–∞, –ë–î
- [x] LSI_CONFIG - n-gram range, top_n, lemmatization
- [x] KEI_CONFIG - —Å–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º—É–ª, –î–∏—Ä–µ–∫—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] EXCEL_CONFIG - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞, —Ñ–∏–ª—å—Ç—Ä—ã

### 12. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main.py ‚úÖ

**–ù–æ–≤—ã–µ —ç—Ç–∞–ø—ã:**
- [x] –≠—Ç–∞–ø 4.5: analyze_serp() - SERP –∞–Ω–∞–ª–∏–∑
- [x] –≠—Ç–∞–ø 4.6: calculate_metrics() - KEI —Ä–∞—Å—á–µ—Ç
- [x] –≠—Ç–∞–ø 4.7: aggregate_cluster_lsi() - LSI –∞–≥—Ä–µ–≥–∞—Ü–∏—è

**–û–±–Ω–æ–≤–ª–µ–Ω—ã:**
- [x] classify_intent() - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é –≥–µ–æ-–ª–æ–≥–∏–∫—É
- [x] topic modeling - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ soft clustering
- [x] export_results() - –¥–æ–±–∞–≤–ª–µ–Ω Excel —ç–∫—Å–ø–æ—Ä—Ç

### 13. CLI –ê—Ä–≥—É–º–µ–Ω—Ç—ã ‚úÖ

**–î–æ–±–∞–≤–ª–µ–Ω—ã:**
- [x] --xmlstock-api-key (user:key)
- [x] --enable-serp
- [x] --max-serp-queries (default 500)
- [x] --enable-kei
- [x] --skip-excel
- [x] --excel-with-charts
- [x] --soft-clustering

### 14. CSV Exporter Update ‚úÖ
**–§–∞–π–ª:** `seo_analyzer/export/csv_exporter.py`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–ª–æ–Ω–∫–∏:**
- [x] priority_score, kei_effectiveness, kei_standard, etc.
- [x] serp_docs_count, serp_main_pages, serp_titles_count
- [x] cluster_lsi_phrases, all_topics_str

### 15. Requirements ‚úÖ
**–§–∞–π–ª:** `requirements.txt`

**–î–æ–±–∞–≤–ª–µ–Ω—ã:**
- [x] aiohttp>=3.9.0
- [x] xlsxwriter>=3.1.9
- [x] openpyxl>=3.1.2

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π

```
seo_analyzer/
‚îú‚îÄ‚îÄ analysis/           # –ù–û–í–ê–Ø –ü–ê–ü–ö–ê
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ serp_analyzer.py
‚îÇ   ‚îî‚îÄ‚îÄ cluster_lsi_aggregator.py
‚îú‚îÄ‚îÄ metrics/            # –ù–û–í–ê–Ø –ü–ê–ü–ö–ê
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ seo_metrics_calculator.py
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ serp_database.py     # –ù–û–í–´–ô
‚îÇ   ‚îú‚îÄ‚îÄ serp_cache.py        # –ù–û–í–´–ô
‚îÇ   ‚îú‚îÄ‚îÄ lsi_extractor.py     # –ù–û–í–´–ô
‚îÇ   ‚îú‚îÄ‚îÄ serp_data_enricher.py # –ù–û–í–´–ô
‚îÇ   ‚îî‚îÄ‚îÄ config.py            # –û–ë–ù–û–í–õ–ï–ù
‚îú‚îÄ‚îÄ classification/
‚îÇ   ‚îî‚îÄ‚îÄ intent_classifier.py # –û–ë–ù–û–í–õ–ï–ù (–≥–µ–æ)
‚îú‚îÄ‚îÄ clustering/
‚îÇ   ‚îî‚îÄ‚îÄ topic_modeler.py     # –û–ë–ù–û–í–õ–ï–ù (soft clustering)
‚îî‚îÄ‚îÄ export/
    ‚îú‚îÄ‚îÄ excel_exporter.py    # –ù–û–í–´–ô
    ‚îî‚îÄ‚îÄ csv_exporter.py      # –û–ë–ù–û–í–õ–ï–ù
```

## üìä –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ output/

```
output/
‚îú‚îÄ‚îÄ serp_data.db                    # SQLite –ë–î
‚îú‚îÄ‚îÄ serp_cache/                     # –§–∞–π–ª–æ–≤—ã–π –∫—ç—à
‚îÇ   ‚îî‚îÄ‚îÄ ab/abc123.json
‚îú‚îÄ‚îÄ seo_analysis.xlsx               # Excel (5 –ª–∏—Å—Ç–æ–≤)
‚îú‚îÄ‚îÄ cluster_lsi_phrases.csv         # LSI –ø–æ –∫–ª–∞—Å—Ç–µ—Ä–∞–º
‚îú‚îÄ‚îÄ seo_analysis_full.csv           # –° KEI –º–µ—Ç—Ä–∏–∫–∞–º–∏
‚îú‚îÄ‚îÄ seo_analysis_top1000.csv
‚îú‚îÄ‚îÄ clusters_summary.csv
‚îî‚îÄ‚îÄ ...
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π (–±–µ–∑ SERP)
```bash
python main.py semantika/—Å–∫—É–¥.csv
```

### –° SERP + KEI
```bash
python main.py semantika/—Å–∫—É–¥.csv \
  --xmlstock-api-key myuser:abc123 \
  --enable-serp \
  --max-serp-queries 500
```

### –ü–æ–ª–Ω—ã–π pipeline
```bash
python main.py semantika/—Å–∫—É–¥.csv \
  --xmlstock-api-key myuser:abc123 \
  --enable-serp \
  --enable-kei \
  --max-serp-queries 500 \
  --soft-clustering \
  --excel-with-charts \
  --enable-graph
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç:** `test_serp_kei_integration.py`

```bash
python test_serp_kei_integration.py
```

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –ò–º–ø–æ—Ä—Ç—ã –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- ‚úÖ SQLite –ë–î (—Å–æ–∑–¥–∞–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ)
- ‚úÖ LSI —ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ—Ä–∞–∑)
- ‚úÖ KEI –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (18 —Ñ–æ—Ä–º—É–ª)
- ‚úÖ Excel —ç–∫—Å–ø–æ—Ä—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **SERP_KEI_EXCEL_GUIDE.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (100+ —Å—Ç—Ä–∞–Ω–∏—Ü)
   - –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π
   - SQLite –ë–î –ø–æ–¥—Ä–æ–±–Ω–æ
   - –í—Å–µ KEI —Ñ–æ—Ä–º—É–ª—ã —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏
   - Excel –ª–∏—Å—Ç—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - Use cases –∏ best practices
   - API reference
   - Troubleshooting

2. **IMPLEMENTATION_SUMMARY.md** (—ç—Ç–æ—Ç —Ñ–∞–π–ª) - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. –£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–£—Ä–æ–≤–µ–Ω—å 1:** SQLite –ë–î (–æ—Å–Ω–æ–≤–Ω–æ–π)
- **–£—Ä–æ–≤–µ–Ω—å 2:** –§–∞–π–ª–æ–≤—ã–π –∫—ç—à (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
- **–£—Ä–æ–≤–µ–Ω—å 3:** API –∑–∞–ø—Ä–æ—Å (–µ—Å–ª–∏ –Ω–µ—Ç –∫—ç—à–∞)

**Cache hit rate:** –æ–±—ã—á–Ω–æ 70-90% –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞—Ö

### 2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π —Å–∫–æ—Ä
```python
priority_score = 
  normalized(frequency) * 0.3 +
  (100 - difficulty) * 0.25 +
  normalized(commercial) * 0.25 +
  normalized(kei_effectiveness) * 0.20
```

**–¢–æ–ø –∑–∞–ø—Ä–æ—Å—ã:** —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ priority_score –≤ Excel "Top Priority"

### 3. LSI –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
–ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Ç–µ—Ä ‚Üí —Ç–æ–ø-10 LSI —Ñ—Ä–∞–∑ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤:
- –ó–∞–≥–æ–ª–æ–≤–∫–∞—Ö H2/H3
- –ê–±–∑–∞—Ü–∞—Ö —Ç–µ–∫—Å—Ç–∞
- Meta description
- Alt —Ç–µ–≥–∞—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 4. –ì–µ–æ-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
```
Russian.txt (–≥–æ—Ä–æ–¥–∞ –†–§ —Å \b)
  ‚Üì
Moscow.txt (–≤–∞—Ä–∏–∞–Ω—Ç—ã –ú–æ—Å–∫–≤—ã)
  ‚Üì
Kazakhstan/Belarus/Ukraine
  ‚Üì
Country (–æ–±—â–∏–µ —Ç–µ—Ä–º–∏–Ω—ã)
```

–í—Å–µ –≥–µ–æ-–∑–∞–ø—Ä–æ—Å—ã ‚Üí commercial intent

### 5. Soft clustering
–û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ–º** —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏:
```
"—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç—É—Ä–Ω–∏–∫–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è"
‚Üí –¢–µ–º–∞ 0 (—Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è) - 45%
‚Üí –¢–µ–º–∞ 3 (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è) - 30%
‚Üí –¢–µ–º–∞ 7 (—Ç—É—Ä–Ω–∏–∫–µ—Ç—ã) - 15%
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç:**
   ```bash
   python test_serp_kei_integration.py
   ```

3. **–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á xmlstock:**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ xmlstock.com
   - –§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞: `username:key`

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑:**
   ```bash
   python main.py semantika/—Å–∫—É–¥.csv \
     --xmlstock-api-key myuser:mykey \
     --enable-serp \
     --max-serp-queries 500
   ```

5. **–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - `output/seo_analysis.xlsx` - –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
   - –õ–∏—Å—Ç "Top Priority" - –Ω–∞—á–∞—Ç—å —Å —ç—Ç–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –õ–∏—Å—Ç "Clusters Summary" - –≤—ã–±—Ä–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã
   - –õ–∏—Å—Ç "LSI Phrases" - –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 11
- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 5
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~4000+
- **–ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:** 50+
- **KEI —Ñ–æ—Ä–º—É–ª:** 18
- **Excel –ª–∏—Å—Ç–æ–≤:** 5
- **–¢–∞–±–ª–∏—Ü –ë–î:** 3

## ‚ú® –û—Å–æ–±—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ API –∑–∞—Ç—Ä–∞—Ç**
   - –î–∞–Ω–Ω—ã–µ –≤ –ë–î ‚Üí –º–µ–Ω—è–π —Ñ–æ—Ä–º—É–ª—ã KEI ‚Üí –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–π
   - –ù–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ xmlstock

2. **–ò—Å—Ç–æ—Ä–∏—è SERP**
   - –ë–î —Ö—Ä–∞–Ω–∏—Ç timestamp –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
   - –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏

3. **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
   - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ config.py
   - –í–µ—Å–∞ priority_score –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è

4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - Async –æ–±—Ä–∞–±–æ—Ç–∫–∞
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (max_concurrent)
   - Caching –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

## üéâ –ò—Ç–æ–≥

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞** –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ SERP –∞–Ω–∞–ª–∏–∑ (xmlstock API, TOP-30, lr=213)
- ‚úÖ LSI –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ (n-–≥—Ä–∞–º–º—ã, –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è)
- ‚úÖ 18 KEI —Ñ–æ—Ä–º—É–ª (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ + Soltyk + custom)
- ‚úÖ Excel —ç–∫—Å–ø–æ—Ä—Ç (5 –ª–∏—Å—Ç–æ–≤, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úÖ SQLite –ë–î (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø)
- ‚úÖ –ì–µ–æ-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (Russian.txt –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- ‚úÖ Soft topic clustering (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ–º)

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-12-07  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Completed  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ Test script included


