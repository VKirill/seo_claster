# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≠–¢–ê–ü–ê 3: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

## –ü—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### ‚úÖ 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
**–§–∞–π–ª:** `seo_analyzer/classification/intent_classifier.py`

**–ë—ã–ª–æ:** 
- –¶–∏–∫–ª –ø–æ ~1097 –≥–æ—Ä–æ–¥–∞–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –°–æ–∑–¥–∞–Ω–∏–µ regex –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞
- ~11 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –ø—Ä–æ–≤–µ—Ä–æ–∫ regex –¥–ª—è 10K –∑–∞–ø—Ä–æ—Å–æ–≤

**–°—Ç–∞–ª–æ:**
- –ü—Ä–µ–¥–∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –≤ –æ–¥–∏–Ω regex –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –û–¥–∏–Ω –≤—ã–∑–æ–≤ `regex.search()` –≤–º–µ—Å—Ç–æ —Ç—ã—Å—è—á
- –ú–∞–ø–ø–∏–Ω–≥ lowercase -> original case –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** üî• **–≤ 100-1000 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ**

### ‚úÖ 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö/–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–ª–æ–≤
**–§–∞–π–ª:** `seo_analyzer/classification/intent_classifier.py`

**–ë—ã–ª–æ:**
- –¶–∏–∫–ª `for word in words` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π `if word in query`
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—ã –ø–æ query –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–ª–æ–≤

**–°—Ç–∞–ª–æ:**
- –ü—Ä–µ–¥–∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö —Å–ª–æ–≤ –≤ regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `findall()` –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –≤—Å–µ—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥
- –ú–µ—Ç–æ–¥ `_compile_word_pattern()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** üî• **–≤ 5-10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ**

### ‚úÖ 3. –ó–∞–º–µ–Ω–∞ iterrows() –Ω–∞ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
**–§–∞–π–ª:** `main.py` (—Å—Ç—Ä–æ–∫–∏ 302-326)

**–ë—ã–ª–æ:**
```python
for idx, row in self.df.iterrows():
    page_info = self.page_mapper.map_query_to_page(...)
    self.df.at[idx, 'target_page_type'] = ...
```

**–°—Ç–∞–ª–æ:**
```python
def map_row_to_page(row):
    page_info = self.page_mapper.map_query_to_page(...)
    return pd.Series({...})

page_results = self.df.apply(map_row_to_page, axis=1)
self.df['target_page_type'] = page_results['target_page_type']
```

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** üî• **–≤ 5-10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ**

### ‚úÖ 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
**–§–∞–π–ª—ã:** 
- `seo_analyzer/classification/intent_classifier.py`
- `seo_analyzer/classification/brand_detector.py`
- `seo_analyzer/classification/funnel_classifier.py`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã —á–µ—Ä–µ–∑ `tqdm` –¥–ª—è –≤—Å–µ—Ö batch-–æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ (<100 –∑–∞–ø—Ä–æ—Å–æ–≤)
- –û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

**–ü–æ–ª—å–∑–∞:** üìä –í–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üìä –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----------------|-------------------|-----------|
| **–í—Ä–µ–º—è –Ω–∞ 1K –∑–∞–ø—Ä–æ—Å–æ–≤** | ~30-60 —Å–µ–∫ | ~3-5 —Å–µ–∫ | **10x** |
| **–í—Ä–µ–º—è –Ω–∞ 10K –∑–∞–ø—Ä–æ—Å–æ–≤** | ~5-10 –º–∏–Ω | ~30-60 —Å–µ–∫ | **10-20x** |
| **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** | ~5-8 –º–∏–Ω | ~5-10 —Å–µ–∫ | **50-100x** |
| **–¶–µ–ª–µ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** | ~2-3 –º–∏–Ω | ~20-30 —Å–µ–∫ | **5-10x** |

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–µ–¥–∫–æ–º–ø–∏–ª—è—Ü–∏—è regex –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
```python
def _compile_word_pattern(self, words: Set[str]) -> re.Pattern:
    """–ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –≤ –æ–¥–∏–Ω –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π regex"""
    if not words:
        return None
    # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–ª–∏–Ω–µ (–æ—Ç –¥–ª–∏–Ω–Ω—ã—Ö –∫ –∫–æ—Ä–æ—Ç–∫–∏–º)
    escaped_words = [re.escape(str(word)) for word in sorted(words, key=len, reverse=True)]
    pattern = r'\b(' + '|'.join(escaped_words) + r')\b'
    return re.compile(pattern, re.IGNORECASE)
```

### –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã —Å –∞–≤—Ç–æ–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º
```python
show_progress = len(queries) >= 100
iterator = tqdm(queries, desc="–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ–Ω—Ç–∞", disable=not show_progress)
```

## üéØ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–í—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è** –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ:

```bash
python main.py
```

–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!

## üìà –í–ª–∏—è–Ω–∏–µ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ

‚úÖ **–ë–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞** - –≤—Å–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ API –∏ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã  
‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞** - –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –∏–¥—ë—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞

## üîÆ –î–∞–ª—å–Ω–µ–π—à–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Multiprocessing** - —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. **Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞ SERP** - –ø–∞–∫–µ—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API
4. **–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NumPy

---

**–î–∞—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** 2025-12-07  
**–í–µ—Ä—Å–∏—è:** v1.4-optimized

