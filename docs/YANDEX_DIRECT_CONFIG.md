# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Yandex Direct API

## üìã –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≥–∏–æ–Ω–∞

### –í —Ñ–∞–π–ª–µ `config_local.py`

```python
# –†–µ–≥–∏–æ–Ω –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ Direct (–º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –º–µ–Ω—è—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤)
YANDEX_DIRECT_GEO_ID = 213
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã

| GeoID | –†–µ–≥–∏–æ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|--------|----------|
| **213** | –ú–æ—Å–∫–≤–∞ | –ì–æ—Ä–æ–¥ –ú–æ—Å–∫–≤–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| 1 | –ú–æ—Å–∫–≤–∞ –∏ –æ–±–ª–∞—Å—Ç—å | –ú–æ—Å–∫–≤–∞ + –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å |
| 2 | –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ | –ì–æ—Ä–æ–¥ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ |
| 225 | –†–æ—Å—Å–∏—è | –í—Å—è –†–æ—Å—Å–∏—è |
| 187 | –£–∫—Ä–∞–∏–Ω–∞ | –í—Å—è –£–∫—Ä–∞–∏–Ω–∞ |
| 149 | –ë–µ–ª–∞—Ä—É—Å—å | –í—Å—è –ë–µ–ª–∞—Ä—É—Å—å |
| 159 | –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω | –í–µ—Å—å –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω |

## üéØ –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ–≥–∏–æ–Ω

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í –∫–æ–Ω—Ñ–∏–≥–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```python
# config_local.py
YANDEX_DIRECT_GEO_ID = 2  # –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑:
```bash
python main.py semantika\—Å–∫—É–¥.csv
```

–£–≤–∏–¥–∏—Ç–µ:
```
üìç –†–µ–≥–∏–æ–Ω: –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ (GeoID: 2)
üîß –†–µ–∂–∏–º: Production
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥–æ–≤:

**config_moscow.py:**
```python
from config_local import *
YANDEX_DIRECT_GEO_ID = 213
```

**config_spb.py:**
```python
from config_local import *
YANDEX_DIRECT_GEO_ID = 2
```

**config_russia.py:**
```python
from config_local import *
YANDEX_DIRECT_GEO_ID = 225
```

–ó–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
# –ê–Ω–∞–ª–∏–∑ –¥–ª—è –ú–æ—Å–∫–≤—ã
python main.py semantika\—Å–∫—É–¥.csv --config config_moscow.py

# –ê–Ω–∞–ª–∏–∑ –¥–ª—è –°–ü–±
python main.py semantika\—Å–∫—É–¥.csv --config config_spb.py
```

## üìä –ü–æ—Ä—è–¥–æ–∫ –¥–∞–Ω–Ω—ã—Ö –≤ —ç–∫—Å–ø–æ—Ä—Ç–µ

### Excel

Direct –¥–∞–Ω–Ω—ã–µ **–≤ –∫–æ–Ω—Ü–µ** –≤—Å–µ—Ö —Å—Ç–æ–ª–±—Ü–æ–≤:

```
| –ó–∞–ø—Ä–æ—Å | –ß–∞—Å—Ç–æ—Ç–∞ | ... | KEI | –ö–ª–∞—Å—Ç–µ—Ä | ... | Direct: –ü–æ–∫–∞–∑—ã | Direct: CPC | ... |
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –Ω–∞ –º–µ—Å—Ç–µ
- –õ–µ–≥–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- Direct –Ω–µ –º–µ—à–∞–µ—Ç –±–∞–∑–æ–≤–æ–º—É –∞–Ω–∞–ª–∏–∑—É

### JSON

Direct –¥–∞–Ω–Ω—ã–µ **–ø–µ—Ä–µ–¥ –∫–ª–∞—Å—Ç–µ—Ä–æ–º** (–≤ –æ–±—ä–µ–∫—Ç–µ `yandex_direct`):

```json
{
  "name": "–∫—É–ø–∏—Ç—å –°–ö–£–î",
  "target_url": "/skud/kupit/",
  "total_frequency": 15000,
  "funnel_stage": "bottom",
  "main_intent": "commercial",
  
  "yandex_direct": {
    "total_shows": 12000,
    "total_clicks": 360,
    "avg_ctr": 3.0,
    "avg_cpc": 45.5,
    "total_monthly_budget": 16380.0,
    "queries_with_direct_data": 8,
    "direct_coverage": 80.0
  },
  
  "cluster_id": 5,
  "keywords_count": 10,
  "keywords": [...]
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- Direct –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É –≤–∏–¥–Ω—ã
- –õ–µ–≥–∫–æ –ø–∞—Ä—Å–∏—Ç—å –¥–ª—è –¥–∞—à–±–æ—Ä–¥–æ–≤
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞

## üîß –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
# config_local.py

# === –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø YANDEX DIRECT ===

# –í–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
YANDEX_DIRECT_ENABLED = True

# OAuth —Ç–æ–∫–µ–Ω (–ø–æ–ª—É—á–∏—Ç—å: python get_yandex_direct_token.py)
YANDEX_DIRECT_TOKEN = "y0_AgAAAAB1HybhAAv66QAAAAEIDEnJAABa13ybpXtEM7hRXvhUWMbgU2ntWQ"

# –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (False = production, True = sandbox –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
YANDEX_DIRECT_USE_SANDBOX = False

# –†–µ–≥–∏–æ–Ω –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
YANDEX_DIRECT_GEO_ID = 213  # –ú–æ—Å–∫–≤–∞

# –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞)
YANDEX_DIRECT_CLIENT_ID = "2bce30a579f546e8ae1f530379caddcd"
YANDEX_DIRECT_CLIENT_SECRET = "3aac3ee9bbfc4fa8afd1f1857f27f284"
```

## üìà –í–ª–∏—è–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑

### –ú–æ—Å–∫–≤–∞ (GeoID 213)

```
–ó–∞–ø—Ä–æ—Å: "–∫—É–ø–∏—Ç—å —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫"
–ü–æ–∫–∞–∑—ã: 45,000
CPC: 85 ‚ÇΩ
–ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è: –í—ã—Å–æ–∫–∞—è
```

### –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ (GeoID 2)

```
–ó–∞–ø—Ä–æ—Å: "–∫—É–ø–∏—Ç—å —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫"
–ü–æ–∫–∞–∑—ã: 18,000  ‚Üê –ú–µ–Ω—å—à–µ
CPC: 65 ‚ÇΩ       ‚Üê –ù–∏–∂–µ
–ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è: –°—Ä–µ–¥–Ω—è—è
```

### –í—Å—è –†–æ—Å—Å–∏—è (GeoID 225)

```
–ó–∞–ø—Ä–æ—Å: "–∫—É–ø–∏—Ç—å —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫"
–ü–æ–∫–∞–∑—ã: 180,000  ‚Üê –ù–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ
CPC: 52 ‚ÇΩ        ‚Üê –ù–∏–∂–µ (—É—Å—Ä–µ–¥–Ω–µ–Ω–Ω–∞—è)
–ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è: –°—Ä–µ–¥–Ω—è—è
```

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≥–Ω–æ–∑—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è —Å —É—á–µ—Ç–æ–º —Ä–µ–≥–∏–æ–Ω–∞:

```
Cache Key: phrase_213_RUB  ‚Üê –ú–æ—Å–∫–≤–∞
Cache Key: phrase_2_RUB    ‚Üê –°–ü–±
Cache Key: phrase_225_RUB  ‚Üê –†–æ—Å—Å–∏—è
```

**–ò—Ç–æ–≥:** –º–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.

### –õ–∏–º–∏—Ç—ã API

Direct API –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- **10 —Ñ—Ä–∞–∑** –Ω–∞ 1 CreateNewForecast –∑–∞–ø—Ä–æ—Å
- **–î–æ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤** –≤ –¥–µ–Ω—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à (TTL 7 –¥–Ω–µ–π).

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤

```bash
# 1. –ú–æ—Å–∫–≤–∞
python -c "from config_local import YANDEX_DIRECT_GEO_ID; print(f'Region: {YANDEX_DIRECT_GEO_ID}')"

# 2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
python test_yandex_direct_integration.py

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
# –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏: üìç –†–µ–≥–∏–æ–Ω: –ú–æ—Å–∫–≤–∞ (GeoID: 213)
```

## üìÅ –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `config_local.py.example` | –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (—Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ —Ä–µ–≥–∏–æ–Ω–æ–≤) |
| `config_local.py` | –í–∞—à–∞ —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| `yandex_direct_minus_words.txt` | –ú–∏–Ω—É—Å-—Å–ª–æ–≤–∞ (–Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–µ–≥–∏–æ–Ω–∞) |

## üîó –°–º. —Ç–∞–∫–∂–µ

- `docs/YANDEX_DIRECT_MINUS_WORDS.md` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–Ω—É—Å-—Å–ª–æ–≤–∞–º–∏
- `docs/YANDEX_DIRECT_QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `docs/guides/YANDEX_DIRECT_INTEGRATION.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–ú–µ–Ω—è–π—Ç–µ —Ä–µ–≥–∏–æ–Ω –±—ã—Å—Ç—Ä–æ!** –ü—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—Ç–µ `YANDEX_DIRECT_GEO_ID` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑. üåç

