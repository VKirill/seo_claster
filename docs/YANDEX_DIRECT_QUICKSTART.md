# Yandex Direct - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## üöÄ –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç?

- **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Ç—Ä–∞—Ñ–∏–∫–µ** - –ø–æ–∫–∞–∑—ã –∏ –∫–ª–∏–∫–∏ –ø–æ –≤–∞—à–∏–º –∑–∞–ø—Ä–æ—Å–∞–º –≤ –ú–æ—Å–∫–≤–µ
- **–¢–æ—á–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ CPC** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, —Å—Ä–µ–¥–Ω–∏–µ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ
- **–£—Ä–æ–≤–µ–Ω—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏** - low/medium/high –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- **CTR –ø—Ä–µ–º–∏—É–º –ø–æ–∑–∏—Ü–∏–π** - —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ü—Ä–æ–≥–Ω–æ–∑—ã –±—é–¥–∂–µ—Ç–æ–≤** - —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (3 —à–∞–≥–∞)

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://oauth.yandex.ru/
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ –ª—é–±–æ–µ)
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞: **–Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç API** (`direct:api`)
4. –ü–æ–ª—É—á–∏—Ç–µ OAuth —Ç–æ–∫–µ–Ω

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å config

–û—Ç–∫—Ä–æ–π—Ç–µ `config_local.py` –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```python
YANDEX_DIRECT_ENABLED = True
YANDEX_DIRECT_TOKEN = "y0_AgAAAAB1Hyb..."  # –≤–∞—à —Ç–æ–∫–µ–Ω
YANDEX_DIRECT_USE_SANDBOX = False  # True –¥–ª—è —Ç–µ—Å—Ç–æ–≤
YANDEX_DIRECT_GEO_ID = 213  # –ú–æ—Å–∫–≤–∞
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç

```bash
python test_yandex_direct_integration.py
```

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –∫–æ–¥–µ –∞–Ω–∞–ª–∏–∑–∞

```python
from seo_analyzer.analysis import YandexDirectIntegrator

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
integrator = YandexDirectIntegrator(
    token=YANDEX_DIRECT_TOKEN,
    geo_id=213,
    enabled=True
)

# –û–±–æ–≥–∞—â–µ–Ω–∏–µ DataFrame
df = integrator.enrich_dataframe(df, query_column='query')

# –¢–µ–ø–µ—Ä—å –≤ df –µ—Å—Ç—å:
# - direct_shows, direct_clicks
# - direct_avg_cpc, premium_ctr
# - direct_competition
```

### –ù–æ–≤—ã–µ KEI –º–µ—Ç—Ä–∏–∫–∏

```python
from seo_analyzer.metrics import (
    kei_direct_efficiency,
    kei_direct_quality_score,
    kei_direct_profitability
)

# –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—á–∞—Å—Ç–æ—Ç–∞/CPC * CTR)
df['kei_eff'] = kei_direct_efficiency(df)

# –ö–∞—á–µ—Å—Ç–≤–æ 0-100 –±–∞–ª–ª–æ–≤
df['quality'] = kei_direct_quality_score(df)

# –ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–∏–±—ã–ª–∏
df['profit'] = kei_direct_profitability(df, avg_check=5000, conversion_rate=2)
```

## üéØ ID —Ä–µ–≥–∏–æ–Ω–æ–≤

| ID | –†–µ–≥–∏–æ–Ω |
|----|--------|
| 213 | –ú–æ—Å–∫–≤–∞ |
| 1 | –ú–æ—Å–∫–≤–∞ –∏ –æ–±–ª–∞—Å—Ç—å |
| 2 | –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ |
| 225 | –†–æ—Å—Å–∏—è |

## üì¶ –ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

- `direct_shows` - –ø–æ–∫–∞–∑—ã –∑–∞ 30 –¥–Ω–µ–π
- `direct_clicks` - –∫–ª–∏–∫–∏  
- `direct_avg_cpc` - —Å—Ä–µ–¥–Ω–∏–π CPC (—Ä—É–±)
- `premium_ctr` - CTR –Ω–∞ –ø—Ä–µ–º–∏—É–º –ø–æ–∑–∏—Ü–∏—è—Ö (%)
- `direct_competition` - —É—Ä–æ–≤–µ–Ω—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏
- `direct_recommended_cpc` - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç–∞–≤–∫–∞ (—Ä—É–±)

### –î–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞:

- –°—É–º–º–∞—Ä–Ω—ã–µ –ø–æ–∫–∞–∑—ã/–∫–ª–∏–∫–∏
- –°—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω—ã–π CPC
- –ü—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏
- –ú–µ–¥–∏–∞–Ω–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç–∞–≤–∫–∞

## ‚öôÔ∏è –õ–∏–º–∏—Ç—ã

- **–§—Ä–∞–∑ –≤ –∑–∞–ø—Ä–æ—Å–µ:** –¥–æ 10
- **–°–ª–æ–≤ –≤ —Ñ—Ä–∞–∑–µ:** –¥–æ 6
- **–ö—ç—à:** 7 –¥–Ω–µ–π
- **Sandbox:** –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)

## üÜò –ü—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ "API returned error"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ù—É–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑—ã
‚Üí –§—Ä–∞–∑–∞ —Å–ª–∏—à–∫–æ–º —Ä–µ–¥–∫–∞—è –∏–ª–∏ >6 —Å–ª–æ–≤

### –ú–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚Üí –ö—ç—à –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ 7 –¥–Ω–µ–π

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

‚Üí `docs/guides/YANDEX_DIRECT_INTEGRATION.md`

## üí° –ü—Ä–∏–º–µ—Ä –∏–∑ n8n

–í–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã n8n —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã! –ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –∫–∞–∫ –µ—Å—Ç—å:
- Node "–û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞" ‚Üí `CreateNewForecast`
- Node "–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤" ‚Üí `GetForecast`
- Node "Code1" ‚Üí –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

–¢–æ–∫–µ–Ω: `y0_AgAAAAB1HybhAAv66QAAAAEIDEnJAABa13y...` (–∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞)

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤–∞—à–∞ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç üéâ


