# –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Yandex Direct –¥–ª—è API

## üéØ –ü—Ä–æ–±–ª–µ–º–∞: `invalid_scope`

–ï—Å–ª–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É:
```
error=invalid_scope
–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–æ—Å—Ç—É–ø—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —É –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Yandex Direct API.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Yandex OAuth

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: https://oauth.yandex.ru/

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ**: `SEO Analyzer Direct` (–ª—é–±–æ–µ)
   - **–¢–∏–ø**: **"–í–µ–±-—Å–µ—Ä–≤–∏—Å"** (–∏–ª–∏ "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞")
   - **Redirect URI**: –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ `https://oauth.yandex.ru/verification_code`

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ—Å—Ç—É–ø—ã (–í–ê–ñ–ù–û!)

–í —Ä–∞–∑–¥–µ–ª–µ **"–î–æ—Å—Ç—É–ø—ã (Scope)"** –≤–∫–ª—é—á–∏—Ç–µ:

- ‚úÖ **Yandex.Direct (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã–º–∏ –∫–∞–º–ø–∞–Ω–∏—è–º–∏)**
- ‚úÖ **–î–æ—Å—Ç—É–ø –∫ API –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç–∞**

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å Direct!**

### –®–∞–≥ 4: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- **Client ID** (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- **Client Secret** (–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

### –®–∞–≥ 5: –û–±–Ω–æ–≤–∏—Ç–µ config_local.py

```python
# config_local.py

YANDEX_DIRECT_CLIENT_ID = "–≤–∞—à_–Ω–æ–≤—ã–π_client_id"
YANDEX_DIRECT_CLIENT_SECRET = "–≤–∞—à_–Ω–æ–≤—ã–π_client_secret"
```

### –®–∞–≥ 6: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω

```bash
python get_yandex_direct_token.py
```

–¢–µ–ø–µ—Ä—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ!

---

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—á—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–æ)

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ —Ä–∞–∑–¥–µ–ª–µ **"–î–æ—Å—Ç—É–ø—ã"** –≤—ã–±—Ä–∞–Ω—ã:

```
‚òëÔ∏è Yandex.Direct
   ‚òëÔ∏è –î–æ—Å—Ç—É–ø –∫ API –î–∏—Ä–µ–∫—Ç–∞ (direct:api)
   ‚òëÔ∏è –ß—Ç–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   ‚òëÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏—è–º–∏
```

---

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: –ò–∑–º–µ–Ω–∏—Ç—å scope –≤ –∫–æ–¥–µ

–ï—Å–ª–∏ —Ç–æ—á–Ω—ã–π scope –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É, –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –∫–æ–¥–µ:

```python
# seo_analyzer/core/yandex_oauth_helper.py, —Å—Ç—Ä–æ–∫–∞ 41

'scope': 'direct:api'  # –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
                        # 'direct:read'
                        # 'api:direct'
                        # –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –Ø–Ω–¥–µ–∫—Å
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å

- OAuth: https://yandex.ru/dev/id/doc/ru/
- Direct API: https://yandex.ru/dev/direct/doc/start/

---

## ‚ùì FAQ

**Q: –ì–¥–µ –≤–∑—è—Ç—å Client ID –∏ Secret?**
A: –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ https://oauth.yandex.ru/ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**Q: –ö–∞–∫–æ–π scope –Ω—É–∂–µ–Ω –¥–ª—è Direct API?**
A: –û–±—ã—á–Ω–æ `direct:api`, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?**
A: –î–∞, –Ω–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ –¥–æ—Å—Ç—É–ø—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

**Q: –ü–æ—á–µ–º—É –æ—à–∏–±–∫–∞ invalid_scope?**
A: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Direct API. –î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.

