# ‚ö° –†–µ–∑—é–º–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ SERP –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
SERP –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–ª–∞ **–æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ** (~20-30 –º–∏–Ω—É—Ç –¥–ª—è 5,292 –∑–∞–ø—Ä–æ—Å–æ–≤) –∏–∑-–∑–∞:
- –ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ O(n¬≤ √ó m)
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Å–ª–æ–≤–∞—Ä—è–º –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ (3 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

### 1. üö´ –û—Ç–∫–ª—é—á–µ–Ω —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
**–§–∞–π–ª:** `pipeline/stages/clusterer.py`  
**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** `semantic_check=False`  
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 2-3x

### 2. üåç Natasha NER –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏
**–§–∞–π–ª:** `seo_analyzer/clustering/semantic_checker.py`  
**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ–º Natasha –≤–º–µ—Å—Ç–æ regex + pymorphy3  
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 5-10x –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫  
**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** `@lru_cache(maxsize=10000)`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –í–°–ï –≥–æ—Ä–æ–¥–∞
- –†–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ –ø–∞–¥–µ–∂–∞–º–∏ –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–≤–∞—Ä–µ–π

### 3. üöÄ URL —Ö—ç—à-–∏–Ω–¥–µ–∫—Å
**–§–∞–π–ª:** `seo_analyzer/clustering/serp_advanced_clusterer.py`  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_build_url_index()` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_find_similar_queries_fast()` - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 10-20x

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```python
# –ë–´–õ–û (–º–µ–¥–ª–µ–Ω–Ω–æ):
for query in queries:  # 5,292 –∑–∞–ø—Ä–æ—Å–∞
    for cluster_id in range(N):  # –î–æ 2,000+ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
        for cluster_query in cluster_queries:  # –î–æ 100 –∑–∞–ø—Ä–æ—Å–æ–≤
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
# –°–ª–æ–∂–Ω–æ—Å—Ç—å: O(n¬≤ √ó m) = ~500 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π

# –°–¢–ê–õ–û (–±—ã—Å—Ç—Ä–æ):
# 1. –°—Ç—Ä–æ–∏–º –∏–Ω–¥–µ–∫—Å –æ–¥–∏–Ω —Ä–∞–∑: URL ‚Üí –∑–∞–ø—Ä–æ—Å—ã
url_index = {url: {query1, query2, ...}}

# 2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞—Ö–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –ü–û–•–û–ñ–ò–ï
for query in queries:
    similar = find_similar_queries_fast(query, url_index)  # ~30 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –≤–º–µ—Å—Ç–æ 5,292!
    for candidate in similar:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
# –°–ª–æ–∂–Ω–æ—Å—Ç—å: O(n √ó k) –≥–¥–µ k = 30 URL
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –≠—Ç–∞–ø | –í—Ä–µ–º—è –Ω–∞ 5,292 –∑–∞–ø—Ä–æ—Å–∞ |
|------|------------------------|
| **–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** | ~20-30 –º–∏–Ω—É—Ç |
| **–ü–æ—Å–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è semantic** | ~8-12 –º–∏–Ω—É—Ç |
| **+ Natasha** | ~6-10 –º–∏–Ω—É—Ç |
| **+ URL —Ö—ç—à-–∏–Ω–¥–µ–∫—Å** | **~30-60 —Å–µ–∫—É–Ω–¥** ‚ö° |

**–û–±—â–µ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ: 20-40x**

## üéâ –ò—Ç–æ–≥

–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **20-40 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ**!
- –ë—ã–ª–æ: ~20-30 –º–∏–Ω—É—Ç
- –°—Ç–∞–ª–æ: ~30-60 —Å–µ–∫—É–Ω–¥

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ `main.py` –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ—Ç **–ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ**.

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –µ—â–µ –±—ã—Å—Ç—Ä–µ–µ (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ—Ç–Ω—è–º–∏ —Ç—ã—Å—è—á –∑–∞–ø—Ä–æ—Å–æ–≤):
- **MinHash LSH** ‚Üí 100-500x —É—Å–∫–æ—Ä–µ–Ω–∏–µ (~5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞)

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `pipeline/stages/clusterer.py` - –æ—Ç–∫–ª—é—á–µ–Ω semantic_check
2. `seo_analyzer/clustering/semantic_checker.py` - Natasha NER –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏
3. `seo_analyzer/clustering/serp_advanced_clusterer.py` - URL —Ö—ç—à-–∏–Ω–¥–µ–∫—Å
4. `SERP_CLUSTERING_OPTIMIZATION.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–î–∞—Ç–∞:** 7 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

