# ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è LSI —Ñ—Ä–∞–∑ –≤ –ë–î

## üìä –ü—Ä–æ–±–ª–µ–º–∞
- **–ë—ã–ª–æ**: –°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ `lsi_phrases` —Ö—Ä–∞–Ω–∏–ª–∞ —Ñ—Ä–∞–∑—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: ~92% —Ñ—Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä—è–ª–∏—Å—å –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **–ü—Ä–∏–º–µ—Ä**: –§—Ä–∞–∑–∞ "—Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø" —Ö—Ä–∞–Ω–∏–ª–∞—Å—å 500+ —Ä–∞–∑ –≤ –ë–î

## ‚ú® –†–µ—à–µ–Ω–∏–µ
–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ —Å 2 —Ç–∞–±–ª–∏—Ü–∞–º–∏:

### 1. `unique_lsi_phrases` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ—Ä–∞–∑—ã
```sql
CREATE TABLE unique_lsi_phrases (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    phrase TEXT NOT NULL UNIQUE,           -- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Ñ—Ä–∞–∑–∞
    total_frequency INTEGER DEFAULT 0       -- –û–±—â–∞—è —á–∞—Å—Ç–æ—Ç–∞ –ø–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º
)
```

### 2. `serp_lsi_mapping` - –°–≤—è–∑–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ñ—Ä–∞–∑–∞–º–∏
```sql
CREATE TABLE serp_lsi_mapping (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    serp_result_id INTEGER NOT NULL,        -- ID SERP –∑–∞–ø—Ä–æ—Å–∞
    phrase_id INTEGER NOT NULL,             -- ID —Ñ—Ä–∞–∑—ã –∏–∑ unique_lsi_phrases
    frequency INTEGER DEFAULT 1,            -- –ß–∞—Å—Ç–æ—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    source TEXT,                            -- –ò—Å—Ç–æ—á–Ω–∏–∫ (title/snippet/passages)
    UNIQUE(serp_result_id, phrase_id)
)
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–î–û –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ó–∞–ø–∏—Å–µ–π –≤ `lsi_phrases`: 95,970
- –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ñ—Ä–∞–∑: 7,626
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: **92.1%** üî¥

**–ü–û–°–õ–ï –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ó–∞–ø–∏—Å–µ–π –≤ `unique_lsi_phrases`: 7,626 (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ)
- –ó–∞–ø–∏—Å–µ–π –≤ `serp_lsi_mapping`: 95,970 (—Å–≤—è–∑–∏)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: **0%** ‚úÖ

**–≠–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞:** ~92% –º–µ–Ω—å—à–µ –¥—É–±–ª–µ–π —Ç–µ–∫—Å—Ç–∞!

## üîß –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

### 1. `SERPDatabase._init_database()`
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã `unique_lsi_phrases` –∏ `serp_lsi_mapping`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

### 2. `SERPDatabase.save_serp_data()`
- –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ LSI —Ñ—Ä–∞–∑—ã:
  1. –î–æ–±–∞–≤–ª—è–µ—Ç –≤ `unique_lsi_phrases` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
  2. –ü–æ–ª—É—á–∞–µ—Ç `phrase_id`
  3. –û–±–Ω–æ–≤–ª—è–µ—Ç `total_frequency`
  4. –°–æ–∑–¥–∞–µ—Ç —Å–≤—è–∑—å –≤ `serp_lsi_mapping`

### 3. `SERPDatabase.get_serp_data()`
- –ß–∏—Ç–∞–µ—Ç LSI —á–µ—Ä–µ–∑ JOIN:
```python
SELECT up.phrase, m.frequency, m.source 
FROM serp_lsi_mapping m
JOIN unique_lsi_phrases up ON m.phrase_id = up.id
WHERE m.serp_result_id = ?
```

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–≠–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞**: –ö–∞–∂–¥–∞—è —Ñ—Ä–∞–∑–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è 1 —Ä–∞–∑ –≤–º–µ—Å—Ç–æ —Å–æ—Ç–µ–Ω
2. **–°–∫–æ—Ä–æ—Å—Ç—å**: –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `phrase` –∏ `phrase_id`
3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: `total_frequency` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ñ—Ä–∞–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ
4. **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å**: Foreign keys –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—É—é —Å—Ö–µ–º—É:

‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (`main.py`)**
- –ü–æ–ª—É—á–∞–µ—Ç LSI —á–µ—Ä–µ–∑ `SERPDatabase.get_serp_data()`
- –î—É–±–ª–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

‚úÖ **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è**
- `ClusterLSIAggregator` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ DataFrame
- –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ—Ä–∞–∑—ã –ø–æ –∫–ª–∞—Å—Ç–µ—Ä–∞–º

‚úÖ **–≠–∫—Å–ø–æ—Ä—Ç**
- Excel, CSV, JSON - –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å—Ö–µ–º—É
- –§–∞–π–ª `cluster_lsi_phrases.csv` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ—Ä–∞–∑—ã

‚úÖ **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑**
- KEI, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Å–ª–æ–∂–Ω–æ—Å—Ç—å - –≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –≤ –ë–î —É–∂–µ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü–µ `lsi_phrases`:

```bash
# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
python main.py
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `refill_db_fast.py`:
```bash
python refill_db_fast.py --workers=16
```

## üóëÔ∏è –°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ —É–¥–∞–ª–µ–Ω–∞

‚úÖ **–¢–∞–±–ª–∏—Ü–∞ `lsi_phrases` —É–¥–∞–ª–µ–Ω–∞ –∏–∑ —Å—Ö–µ–º—ã**
- –î—É–±–ª–∏ –±–æ–ª—å—à–µ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ (VACUUM)
- –≠–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞ ~92%

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –ò–Ω–¥–µ–∫—Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Ñ—Ä–∞–∑–∞–º (FTS5)
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ø LSI —Ñ—Ä–∞–∑ –≤ –ø–∞–º—è—Ç–∏

---

**–î–∞—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** –î–µ–∫–∞–±—Ä—å 2024  
**–í–µ—Ä—Å–∏—è:** 1.4  
**–ê–≤—Ç–æ—Ä:** SEO Cluster Team

